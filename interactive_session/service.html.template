<html style="background:transparent">
<style>
  .progress_bar {
    font-family: Lato, sans-serif;
    position: fixed;
    left: 0;
    color: rgb(85 85 85);
    bottom: 0;
    display: flex;
    width: 100%;
    align-items: center;
    justify-content: center;
    top: 60px;
    z-index: 999;
    height: calc(100vh - 60px);
  }

  .progress_bar__wrapper {
    overflow: hidden;
    border-radius: 15px;
    width: 250px;
    background-color: #c4c4c4;
    overflow: hidden;
  }

  .progress_bar__viewer {
    background: rgb(17 45 80);
    border-radius: 4px;
    height: 4px;
    transform: scaleX(0);
    transform-origin: 0 0;
  }

  .progress_bar.animate-loader .progress_bar__viewer {
    animation: FillAnimation 8s cubic-bezier(0.01, 1.06, 0.71, 1) forwards infinite;
  }

  .progress_bar.animate-loader .progress_bar__state::before {
    content: "";
    animation: TextChange 8s infinite;
  }

  .progress_bar__content {
    display: flex;
    flex-direction: column;
  }

  .progress_bar__state {
    margin-top: 24px;
    text-align: center;
    font-size: 14px;
    line-height: 1.5;
    font-weight: normal;
    color: rgb(85 85 85);
    font-family: Lato, sans-serif;
  }

  @keyframes FillAnimation {
    0% {
      transform: scaleX(0.028);
    }
    10% {
      transform: scaleX(0.028);
    }
    20% {
      transform: scaleX(0.028);
    }
    25% {
      transform: scaleX(0.24);
    }
    35% {
      transform: scaleX(0.24);
    }
    45% {
      transform: scaleX(0.24);
    }
    50% {
      transform: scaleX(0.624);
    }
    60% {
      transform: scaleX(0.624);
    }
    70% {
      transform: scaleX(0.624);
    }
    75% {
      transform: scaleX(0.928);
    }
    85% {
      transform: scaleX(0.928);
    }
    95% {
      transform: scaleX(0.928);
    }
    100% {
      transform: scaleX(1);
    }
  }

  @keyframes TextChange {
    0% {
      content: attr(data-start);
    }
    24% {
      content: attr(data-start);
    }
    25% {
      content: attr(data-middle);
    }
    65% {
      content: attr(data-middle);
    }
    100% {
      content: attr(data-end);
    }
  }
</style>

<body style="background:transparent;margin:0px">

  <iframe id="frame" src="" style="display:none;width:100vw;height:100vh;border:0px"></iframe>

  <div id="loader" style="background:transparent;width:100vw;height:100vh">

    <div class="progress_bar animate-loader">
      <div class="progress_bar__content">
        <div class="progress_bar__wrapper">
          <div class="progress_bar__viewer">
            <div class="progress_bar__shimmer"></div>
          </div>
        </div>
        <div class="progress_bar__state" data-start="Initializing session" data-middle="Establishing connection" data-end="Retrying - waiting for session to start"></div>
      </div>
    </div>

  </div>

  <script>

    var url = "/__FORWARDPATH__/__IPADDRESS__/__OPENPORT__/"

    function httpGet() {
      var xmlHttp = new XMLHttpRequest();
      xmlHttp.open("GET", url, false); // false for synchronous request
      xmlHttp.send(null);
      console.log(xmlHttp.status)
      if (xmlHttp.status != 200) {
        setTimeout(function() {
          httpGet()
        }, 600)
      }
      else {
        document.getElementById("frame").style.display = "";
        document.getElementById("frame").src = url;
        document.getElementById("loader").style.display = "none";
      }
    }
    httpGet()
  </script>

</body>

</html>
